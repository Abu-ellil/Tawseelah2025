# توثيق مشروع توصيلة

## مقدمة

مشروع توصيلة هو منصة متكاملة لخدمات التوصيل تتكون من عدة تطبيقات:
- تطبيق العميل (React Native Expo)
- تطبيق السائق (React Native Expo)
- تطبيق صاحب المتجر (React Native Expo)
- لوحة تحكم الإدارة (React Web)

## البنية العامة للمشروع

```
/
├── customer/           # تطبيق العميل
├── driver/             # تطبيق السائق
├── store/              # تطبيق صاحب المتجر
├── admin/              # لوحة تحكم الإدارة
├── shared/             # المكونات والخدمات المشتركة
├── api/                # الخادم (Node.js + Express)
└── DOCUMENTATION.md    # هذا الملف
```

## التقنيات المستخدمة

### تطبيقات الهاتف (العميل، السائق، صاحب المتجر)
- React Native
- Expo
- NativeWind (للتخطيط والتصميم)
- Redux Toolkit (لإدارة الحالة)
- React Navigation (للاتجاه)
- Socket.io-client (للوظائف الحية)
- react-native-maps (للملاحة)

### لوحة التحكم الإدارية
- React.js
- NativeWind (للتخطيط والتصميم)
- Redux Toolkit (لإدارة الحالة)
- React Router (للاتجاه)
- Recharts (للمخططات)
- Socket.io-client (للوظائف الحية)

### الخادم
- Node.js
- Express.js
- MongoDB (موديلات)
- Socket.io (للوظائف الحية)
- JWT (للمصادقة)

## مكونات المشروع

### 1. تطبيق العميل
- تصفح المتاجر حسب الموقع
- البحث في المنتجات
- سلة الشراء
- تتبع الطلب real-time
- تقييم الخدمة
- محفظة إلكترونية / كل أنظمة الدفع
- إشعارات live

### 2. تطبيق السائق
- تسجيل الدخول Email/Password
- قبول / رفض الطلبات
- خريطة المسار وتوجيه السائق
- إثبات التسليم (صورة/توقيع)
- تتبع الأرباح
- حالة الاتصال (متاح/مشغول)
- إشعارات live

### 3. تطبيق صاحب المتجر
- إدارة المنتجات والمخزون
- استقبال الطلبات وتأكيدها
- إحصائيات المبيعات
- إدارة ساعات العمل
- تقارير مالية
- إشعارات live

### 4. لوحة التحكم الإدارية
- مراجعة طلبات السائقين
- مراقبة الطلبات الحية
- إدارة المناطق الجغرافية
- إدارة العمولة والأسعار
- تقارير شاملة
- إشعارات live

## مكونات النظام المشتركة

### المكونات المشتركة (shared/components/)
- Button: مكون زر قابل لإعادة الاستخدام
- Input: مكون إدخال قابل لإعادة الاستخدام
- Card: مكون بطاقة قابل لإعادة الاستخدام
- Loading: مكون تحميل قابل لإعادة الاستخدام
- Modal: مكون نافذة منبثقة قابل لإعادة الاستخدام
- Alert: مكون تنبيه قابل لإعادة الاستخدام

### الخدمات المشتركة (shared/services/)
- apiService.js: خدمة API مركزية
- socketService.js: خدمة Socket.IO للفعاليات الحية

### الأدوات المشتركة (shared/utils/)
- dateUtils.js: وظائف مساعدة للتواريخ
- validation.js: وظائف مساعدة للتحقق من الصحة
- mockData.js: بيانات تجريبية للاختبار

### الثيمات المشتركة (shared/theme/)
- ThemeProvider.js: مزود السمات مع دعم RTL
- themeUtils.js: وظائف مساعدة للثيمات والاتجاهات

## بنية Redux

كل تطبيق يستخدم Redux Toolkit مع الهياكل التالية:
- store/: يحتوي على مخزن Redux
- slices/: يحتوي على قطع Redux (slices) لكل ميزة

### قطع Redux المشتركة:
- authSlice: إدارة المصادقة
- orderSlice: إدارة الطلبات
- storeSlice: إدارة المتاجر
- productSlice: إدارة المنتجات
- notificationSlice: إدارة الإشعارات
- themeSlice: إدارة السمات (نهاري/ليلي، RTL/LTR)

## API Endpoints

### المصادقة
- POST /api/auth/login - تسجيل الدخول
- POST /api/auth/register - تسجيل الحساب
- POST /api/auth/logout - تسجيل الخروج

### المستخدمين
- GET /api/users/profile - الحصول على ملف المستخدم
- PUT /api/users/profile - تحديث ملف المستخدم

### المتاجر
- GET /api/stores - جلب المتاجر
- GET /api/stores/:id - جلب متجر حسب المعرف
- POST /api/stores - إنشاء متجر
- PUT /api/stores/:id - تحديث متجر

### المنتجات
- GET /api/products - جلب المنتجات
- GET /api/products/:id - جلب منتج حسب المعرف
- POST /api/products - إنشاء منتج
- PUT /api/products/:id - تحديث منتج

### الطلبات
- GET /api/orders - جلب الطلبات
- GET /api/orders/:id - جلب طلب حسب المعرف
- POST /api/orders - إنشاء طلب
- PUT /api/orders/:id - تحديث طلب

## Socket Events

### أحداث الطلبات
- order_status_update: تحديث حالة الطلب
- new_order: طلب جديد
- order_accepted: تم قبول الطلب

### أحداث الموقع
- driver_location_update: تحديث موقع السائق
- order_pickup: تم استلام الطلب من المتجر
- order_delivered: تم تسليم الطلب للعميل

### أحداث الإشعارات
- new_notification: إشعار جديد
- notification_read: تم قراءة الإشعار

## دعم RTL

جميع التطبيقات تدعم الاتجاه من اليمين إلى اليسار (RTL) باستخدام I18nManager من React Native. تم إعداد مكونات ووظائف مساعدة للتعامل مع التحويلات بين الاتجاهات.

## دعم السمات (نهاري/ليلي)

جميع التطبيقات تدعم التبديل بين السمة النهارية والليلية. يتم تطبيق الألوان المناسبة تلقائيًا بناءً على السمة المحددة.

## التحقق من الصحة

تتضمن مكتبة التحقق من الصحة:
- التحقق من صحة البريد الإلكتروني
- التحقق من صحة رقم الهاتف السعودي
- التحقق من صحة كلمة المرور
- التحقق من صحة مكونات العنوان
- التحقق من صحة معلومات المتجر
- التحقق من صحة معلومات السائق

## الترجمة

التطبيقات مصممة لدعم اللغة العربية بشكل كامل، مع إمكانية إضافة لغات أخرى في المستقبل.

## اختبارات النظام

(يجب إضافة وصف الاختبارات هنا)

## توزيع التطبيقات

(يجب إضافة معلومات التوزيع هنا)

## استنتاج

يُعتبر مشروع توصيلة مثالًا شاملاً لمنصة خدمات التوصيل الحديثة مع دعم كامل للغة العربية، ودعم الاتجاه من اليمين إلى اليسار، ودعم السمات النهارية والليلية، ووظائف حية، وواجهة مستخدم متجاوبة.